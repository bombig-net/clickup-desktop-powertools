import{K as O,L as U,M as S,N as j,B as R,O as A,h as b,G as k,P as C,Q as $,R as x,a as D,S as L,U as q,V as G,W as Z,I as z,X as I,Y as H,Z as Q,i as M,_ as V,$ as m,a0 as w,a1 as W,a2 as X,b as P,a3 as J,c as ee,E as se,a4 as re,l as te,a5 as ie,a6 as ae,a7 as ne,a8 as fe,a9 as ue,aa as ce,ab as p,ac as B,ad as oe}from"./TUtYN2Rs.js";import{c as le}from"./STSOISP_.js";class N{anchor;#s=new Map;#r=new Map;#e=new Map;#t=new Set;#i=!0;constructor(e,t=!0){this.anchor=e,this.#i=t}#a=()=>{var e=O;if(this.#s.has(e)){var t=this.#s.get(e),r=this.#r.get(t);if(r)U(r),this.#t.delete(t);else{var i=this.#e.get(t);i&&(this.#r.set(t,i.effect),this.#e.delete(t),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[a,f]of this.#s){if(this.#s.delete(a),a===e)break;const n=this.#e.get(f);n&&(S(n.effect),this.#e.delete(f))}for(const[a,f]of this.#r){if(a===t||this.#t.has(a))continue;const n=()=>{if(Array.from(this.#s.values()).includes(a)){var o=document.createDocumentFragment();C(f,o),o.append(R()),this.#e.set(a,{effect:f,fragment:o})}else S(f);this.#t.delete(a),this.#r.delete(a)};this.#i||!r?(this.#t.add(a),j(f,n,!1)):n()}}};#n=e=>{this.#s.delete(e);const t=Array.from(this.#s.values());for(const[r,i]of this.#e)t.includes(r)||(S(i.effect),this.#e.delete(r))};ensure(e,t){var r=O,i=$();if(t&&!this.#r.has(e)&&!this.#e.has(e))if(i){var a=document.createDocumentFragment(),f=R();a.append(f),this.#e.set(e,{effect:A(()=>t(f)),fragment:a})}else this.#r.set(e,A(()=>t(this.anchor)));if(this.#s.set(r,e),i){for(const[n,u]of this.#r)n===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[n,u]of this.#e)n===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(this.#a),r.ondiscard(this.#n)}else b&&(this.anchor=k),this.#a()}}function ve(s,e,t=!1){b&&D();var r=new N(s),i=t?L:0;function a(f,n){if(b){const o=q(s)===G;if(f===o){var u=Z();z(u),r.anchor=u,I(!1),r.ensure(f,n),I(!0);return}}r.ensure(f,n)}x(()=>{var f=!1;e((n,u=!0)=>{f=!0,a(u,n)}),f||a(!1,null)},i)}function be(s,e,t){b&&D();var r=new N(s);x(()=>{var i=e()??null;r.ensure(i,i&&(a=>t(a,i)))},L)}function T(s,e){return s===e||s?.[m]===e}function ge(s={},e,t,r){return H(()=>{var i,a;return Q(()=>{i=a,a=[],M(()=>{s!==t(...a)&&(e(s,...a),i&&T(t(...i),s)&&e(null,...i))})}),()=>{V(()=>{a&&T(t(...a),s)&&e(null,...a)})}}),s}const de={get(s,e){if(!s.exclude.includes(e))return s.props[e]},set(s,e){return!1},getOwnPropertyDescriptor(s,e){if(!s.exclude.includes(e)&&e in s.props)return{enumerable:!0,configurable:!0,value:s.props[e]}},has(s,e){return s.exclude.includes(e)?!1:e in s.props},ownKeys(s){return Reflect.ownKeys(s.props).filter(e=>!s.exclude.includes(e))}};function Se(s,e,t){return new Proxy({props:s,exclude:e},de)}const he={get(s,e){let t=s.props.length;for(;t--;){let r=s.props[t];if(p(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(s,e,t){let r=s.props.length;for(;r--;){let i=s.props[r];p(i)&&(i=i());const a=w(i,e);if(a&&a.set)return a.set(t),!0}return!1},getOwnPropertyDescriptor(s,e){let t=s.props.length;for(;t--;){let r=s.props[t];if(p(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const i=w(r,e);return i&&!i.configurable&&(i.configurable=!0),i}}},has(s,e){if(e===m||e===B)return!1;for(let t of s.props)if(p(t)&&(t=t()),t!=null&&e in t)return!0;return!1},ownKeys(s){const e=[];for(let t of s.props)if(p(t)&&(t=t()),!!t){for(const r in t)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(t))e.includes(r)||e.push(r)}return e}};function Pe(...s){return new Proxy({props:s},he)}function we(s,e,t,r){var i=!ne||(t&fe)!==0,a=(t&ae)!==0,f=(t&ce)!==0,n=r,u=!0,o=()=>(u&&(u=!1,n=f?M(r):r),n),d;if(a){var Y=m in s||B in s;d=w(s,e)?.set??(Y&&e in s?c=>s[e]=c:void 0)}var h,y=!1;a?[h,y]=le(()=>s[e]):h=s[e],h===void 0&&r!==void 0&&(h=o(),d&&(i&&W(),d(h)));var l;if(i?l=()=>{var c=s[e];return c===void 0?o():(u=!0,c)}:l=()=>{var c=s[e];return c!==void 0&&(n=void 0),c===void 0?n:c},i&&(t&X)===0)return l;if(d){var F=s.$$legacy;return(function(c,v){return arguments.length>0?((!i||!v||F||y)&&d(v?l():c),c):l()})}var g=!1,_=((t&ue)!==0?te:ie)(()=>(g=!1,l()));a&&P(_);var K=se;return(function(c,v){if(arguments.length>0){const E=v?P(_):i&&a?J(c):c;return ee(_,E),g=!0,n!==void 0&&(n=E),c}return oe&&g||(K.f&re)!==0?_.v:P(_)})}export{N as B,ge as b,be as c,ve as i,we as p,Se as r,Pe as s};
